# üé§ Premium Vietnamese Text-to-Speech Application (ZipVoice) - Version 2.0

[![Vietnamese TTS](https://img.shields.io/badge/Language-Vietnamese-red.svg)](https://vi.wikipedia.org/wiki/Ti%E1%BA%BFng_Vi%E1%BB%87t)
[![ZipVoice](https://img.shields.io/badge/Engine-ZipVoice-blue.svg)](https://github.com/k2-fsa/ZipVoice)
[![Docker](https://img.shields.io/badge/Deployment-Docker-2496ed.svg)](https://www.docker.com/)
[![React](https://img.shields.io/badge/Frontend-React-61dafb.svg)](https://reactjs.org/)
[![FastAPI](https://img.shields.io/badge/Backend-FastAPI-009688.svg)](https://fastapi.tiangolo.com/)
[![GPU](https://img.shields.io/badge/GPU-CUDA%2012.1-green.svg)](https://developer.nvidia.com/cuda-toolkit)
[![Production](https://img.shields.io/badge/Status-Production%20Ready-brightgreen.svg)](https://github.com/Clarence161095/Premium-Vietnamese-Text-to-Speech-Application)

> **üáªüá≥ ·ª®ng d·ª•ng Text-to-Speech ti·∫øng Vi·ªát ƒë·∫≥ng c·∫•p qu·ªëc t·∫ø** v·ªõi c√¥ng ngh·ªá ZipVoice Flow Matching ti√™n ti·∫øn nh·∫•t hi·ªán nay. H·ªó tr·ª£ ƒë·∫ßy ƒë·ªß √¢m ƒëi·ªáu, d·∫•u thanh v√† ph√°t √¢m chu·∫©n ti·∫øng Vi·ªát. **Version 2.0** v·ªõi ki·∫øn tr√∫c enterprise-grade: GPU monitoring, thermal protection, emergency controls v√† sentence-by-sentence processing cho hi·ªáu nƒÉng t·ªëi ∆∞u.

## üåü **T√≠nh NƒÉng N·ªïi B·∫≠t**

### üéØ **Ch·∫•t L∆∞·ª£ng √Çm Thanh V∆∞·ª£t Tr·ªôi**

- **ZipVoice Flow Matching**: C√¥ng ngh·ªá AI ti√™n ti·∫øn cho ch·∫•t l∆∞·ª£ng √¢m thanh t·ª± nhi√™n
- **H·ªó tr·ª£ ƒë·∫ßy ƒë·ªß ti·∫øng Vi·ªát**: √Çm ƒëi·ªáu, d·∫•u thanh, v√† ph√°t √¢m chu·∫©n 
- **eSpeak Tokenizer**: X·ª≠ l√Ω ch√≠nh x√°c ng·ªØ √¢m ti·∫øng Vi·ªát (vi language)
- **X·ª≠ l√Ω c√¢u theo c√¢u**: Chia vƒÉn b·∫£n th√†nh c√¢u ri√™ng l·∫ª ƒë·ªÉ t·ªëi ∆∞u hi·ªáu nƒÉng
- **Audio 24kHz**: Ch·∫•t l∆∞·ª£ng √¢m thanh professional v·ªõi mono PCM 16-bit
- **Vietnamese Model**: Model ƒë√£ ƒë∆∞·ª£c train ƒë·∫∑c bi·ªát cho ti·∫øng Vi·ªát (iter-525000-avg-2.pt)

### ‚ö° **Hi·ªáu NƒÉng T·ªëi ∆Øu & An To√†n**

- **Sentence-Based Processing**: X·ª≠ l√Ω t·ª´ng c√¢u ri√™ng bi·ªát trong th∆∞ m·ª•c `/DOING`
- **GPU Monitoring**: Gi√°m s√°t nhi·ªát ƒë·ªô, s·ª≠ d·ª•ng GPU v√† VRAM th·ªùi gian th·ª±c
- **B·∫£o v·ªá nhi·ªát**: T·ª± ƒë·ªông d·ª´ng khi nhi·ªát ƒë·ªô GPU > 90¬∞C, gi·∫£m t·∫£i khi > 85¬∞C
- **Emergency Stop**: N√∫t d·ª´ng kh·∫©n c·∫•p cho qu√° tr√¨nh x·ª≠ l√Ω
- **Performance Metrics**: Theo d√µi hi·ªáu nƒÉng v·ªõi d·ªØ li·ªáu 1000 l·∫ßn render g·∫ßn nh·∫•t
- **Automatic Cleanup**: T·ª± ƒë·ªông x√≥a file t·∫°m sau 8 gi·ªù
- **Error Recovery**: X·ª≠ l√Ω l·ªói graceful v√† recovery t·ª± ƒë·ªông

### üé® **Giao Di·ªán Ng∆∞·ªùi D√πng Hi·ªán ƒê·∫°i**

- **Thi·∫øt k·∫ø Ergonomic**: H·ªá th·ªëng m√†u GitHub-style cho m·∫Øt
- **Dark/Light Mode**: Ch·∫ø ƒë·ªô t·ªëi/s√°ng v·ªõi chuy·ªÉn ƒë·ªïi m∆∞·ª£t m√†
- **Responsive Design**: Ho·∫°t ƒë·ªông t·ªët tr√™n m·ªçi thi·∫øt b·ªã
- **Audio Visualizer**: Hi·ªáu ·ª©ng s√≥ng √¢m thanh chuy√™n nghi·ªáp
- **Tooltip Premium**: H·ªá th·ªëng tooltip v·ªõi glass effect
- **Real-Time Monitoring**: Hi·ªÉn th·ªã tr·∫°ng th√°i GPU v√† ti·∫øn tr√¨nh x·ª≠ l√Ω
- **Vietnamese Interface**: Giao di·ªán ho√†n to√†n ti·∫øng Vi·ªát v·ªõi UX t·ªëi ∆∞u

### üîß **ƒê∆°n Gi·∫£n H√≥a Phi√™n B·∫£n 2.0**

- **Lo·∫°i b·ªè c√†i ƒë·∫∑t n√¢ng cao**: S·ª≠ d·ª•ng m·∫∑c ƒë·ªãnh ZipVoice ƒë√£ ƒë∆∞·ª£c ch·ª©ng minh
- **Kh√¥ng gi·ªõi h·∫°n token**: X·ª≠ l√Ω vƒÉn b·∫£n b·∫•t k·ª≥ ƒë·ªô d√†i nh·ªù x·ª≠ l√Ω c√¢u theo c√¢u
- **T·∫≠p trung v√†o Profile Gi·ªçng N√≥i**: Giao di·ªán qu·∫£n l√Ω profile s·∫°ch s·∫Ω, chuy√™n nghi·ªáp
- **M·∫∑c ƒë·ªãnh th√¥ng minh**: T·ª± ƒë·ªông s·ª≠ d·ª•ng profile "tina" khi kh√¥ng ch·ªçn
- **One-Click Default**: N√∫t s·ª≠ d·ª•ng gi·ªçng m·∫∑c ƒë·ªãnh ngay l·∫≠p t·ª©c

### üîê **Enterprise-Grade Security & Reliability**

- **Docker Security**: Containerized v·ªõi resource limits v√† security contexts
- **GPU Resource Management**: Qu·∫£n l√Ω CUDA memory v√† process isolation
- **Data Persistence**: Volume mounts b·∫£o v·ªá d·ªØ li·ªáu profiles v√† models
- **Health Checks**: Monitoring v√† auto-restart containers khi c·∫ßn
- **Backup & Recovery**: Automatic backup cho voice profiles v√† settings

## üèóÔ∏è **Ki·∫øn Tr√∫c H·ªá Th·ªëng Chi Ti·∫øt**

```mermaid
graph TB
    subgraph "Client Layer"
        A[Web Browser] --> B[React Frontend]
        B --> C[Real-time GPU Monitor]
        B --> D[Audio Player & Visualizer]
    end
    
    subgraph "API Gateway"
        E[FastAPI Backend] --> F[CORS Middleware]
        E --> G[Request Validation]
        E --> H[Response Compression]
    end
    
    subgraph "Processing Engine"
        I[Vietnamese Text Processor] --> J[Sentence Splitter]
        J --> K[ZipVoice Inference]
        K --> L[Audio Merger]
        L --> M[Quality Optimization]
    end
    
    subgraph "GPU Management"
        N[NVIDIA-SMI Monitor] --> O[Temperature Control]
        O --> P[Emergency Stop System]
        P --> Q[Performance Metrics]
    end
    
    subgraph "Data Layer"
        R[Voice Profiles] --> S[Audio Samples]
        T[Processing Cache] --> U[DOING Directory]
        V[Render History] --> W[data.json]
    end
    
    subgraph "Infrastructure"
        X[Docker Compose] --> Y[CUDA Runtime]
        Y --> Z[Volume Mounts]
        Z --> AA[Health Checks]
    end
    
    B -.-> E
    E -.-> I
    I -.-> N
    N -.-> R
    R -.-> X
```

### üîß **Component Architecture (Version 2.0)**

```typescript
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ               Premium Vietnamese TTS v2.0                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Frontend (React + Vite)     ‚îÇ  Backend (FastAPI)          ‚îÇ
‚îÇ  ‚îú‚îÄ Bilingual UI (VI/EN)     ‚îÇ  ‚îú‚îÄ Vietnamese Optimization ‚îÇ
‚îÇ  ‚îú‚îÄ Voice Profile Focus      ‚îÇ  ‚îú‚îÄ Sentence Processing     ‚îÇ
‚îÇ  ‚îú‚îÄ Real-Time GPU Monitor    ‚îÇ  ‚îú‚îÄ GPU Safety Controls     ‚îÇ
‚îÇ  ‚îú‚îÄ Emergency Stop           ‚îÇ  ‚îî‚îÄ Performance Tracking    ‚îÇ
‚îÇ  ‚îî‚îÄ Simplified UX            ‚îÇ                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ              ZipVoice Core (Flow Matching TTS)              ‚îÇ
‚îÇ  ‚îú‚îÄ Model: iter-525000-avg-2.pt (491MB Vietnamese)        ‚îÇ
‚îÇ  ‚îú‚îÄ Tokenizer: eSpeak (vi language)                       ‚îÇ
‚îÇ  ‚îú‚îÄ Audio: 24kHz mono conversion                          ‚îÇ
‚îÇ  ‚îî‚îÄ Sentence-based processing v·ªõi timeout 60s             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ              Docker Infrastructure                          ‚îÇ
‚îÇ  ‚îú‚îÄ Backend: nvidia/cuda:12.1.0 + PyTorch CUDA           ‚îÇ
‚îÇ  ‚îú‚îÄ Frontend: Node.js + Vite development                  ‚îÇ
‚îÇ  ‚îî‚îÄ Data: Voice profiles & /DOING processing folder       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### üìä **Data Flow Architecture**

```python
# Lu·ªìng x·ª≠ l√Ω ho√†n ch·ªânh t·ª´ Text ‚Üí Audio
def vietnamese_tts_pipeline(text: str, profile_id: str = "tina"):
    """
    Pipeline x·ª≠ l√Ω TTS ti·∫øng Vi·ªát ho√†n ch·ªânh
    """
    # 1. Text Preprocessing & Validation
    cleaned_text = preprocess_vietnamese_text(text)
    sentences = split_vietnamese_sentences(cleaned_text)
    
    # 2. GPU Safety Check
    gpu_status = get_gpu_status()
    if gpu_status.temperature >= GPU_TEMP_EMERGENCY:
        raise GPUOverheatException("GPU qu√° n√≥ng, d·ª´ng x·ª≠ l√Ω")
    
    # 3. Profile Loading
    profile_data = load_voice_profile(profile_id)
    
    # 4. Sentence-by-Sentence Processing
    doing_dir = f"/DOING/{timestamp}"
    audio_segments = []
    
    for i, sentence in enumerate(sentences):
        # Check stop signal
        if should_stop_processing():
            cleanup_and_exit(doing_dir)
            return None
            
        # Process individual sentence
        segment_path = f"{doing_dir}/seg_{i:03d}.wav"
        process_single_sentence(
            sentence=sentence,
            profile=profile_data,
            output_path=segment_path,
            timeout=60  # seconds
        )
        audio_segments.append(segment_path)
    
    # 5. Audio Merging with Natural Pauses
    final_audio = merge_audio_segments(
        segments=audio_segments,
        pause_duration=0.5  # 0.5s between sentences
    )
    
    # 6. Quality Optimization & Cleanup
    optimized_audio = optimize_audio_quality(final_audio)
    cleanup_temporary_files(doing_dir, delay_hours=8)
    
    # 7. Performance Metrics Update
    render_metrics.add_render(
        word_count=count_vietnamese_words(text),
        render_time=processing_time
    )
    
    return optimized_audio
```

## üöÄ **C√†i ƒê·∫∑t v√† Ch·∫°y**

## üöÄ **C√†i ƒê·∫∑t v√† Tri·ªÉn Khai Chi Ti·∫øt**

### üìã **Y√™u C·∫ßu H·ªá Th·ªëng**

#### **Ph·∫ßn C·ª©ng T·ªëi Thi·ªÉu:**

- **GPU**: NVIDIA GPU v·ªõi CUDA Compute Capability ‚â• 6.0
- **VRAM**: 6GB+ (khuy·∫øn ngh·ªã 8GB+)
- **RAM**: 8GB+ (khuy·∫øn ngh·ªã 16GB+)
- **Storage**: 10GB+ dung l∆∞·ª£ng tr·ªëng
- **CPU**: 4 cores+ (Intel i5/AMD Ryzen 5 tr·ªü l√™n)

#### **Ph·∫ßn M·ªÅm:**

- **Docker**: 20.10+ v·ªõi Docker Compose
- **NVIDIA Container Toolkit**: ƒê·ªÉ h·ªó tr·ª£ GPU
- **Git**: ƒê·ªÉ clone repository
- **CUDA Driver**: 12.1+ compatible

#### **H·ªá ƒêi·ªÅu H√†nh ƒê∆∞·ª£c H·ªó Tr·ª£:**

- **Linux**: Ubuntu 20.04+, CentOS 8+, RHEL 8+
- **Windows**: Windows 10/11 v·ªõi WSL2 v√† Docker Desktop
- **macOS**: macOS 12+ v·ªõi Docker Desktop (CPU only)

### ‚öôÔ∏è **C√†i ƒê·∫∑t Step-by-Step**

#### **B∆∞·ªõc 1: Chu·∫©n B·ªã M√¥i Tr∆∞·ªùng**

```bash
# Ki·ªÉm tra CUDA v√† GPU
nvidia-smi

# Ki·ªÉm tra Docker
docker --version
docker compose version

# Ki·ªÉm tra NVIDIA Container Toolkit
docker run --rm --gpus all nvidia/cuda:12.1-base-ubuntu20.04 nvidia-smi
```

#### **B∆∞·ªõc 2: Clone Repository & Setup**

```bash
# Clone repository
git clone https://github.com/Clarence161095/Premium-Vietnamese-Text-to-Speech-Application.git
cd Premium-Vietnamese-Text-to-Speech-Application

# T·∫£i ZipVoice submodule
git submodule update --init --recursive

# Ki·ªÉm tra c·∫•u tr√∫c
ls -la
```

#### **B∆∞·ªõc 3: C·∫•u H√¨nh Environment Variables**

```bash
# T·∫°o file .env (tu·ª≥ ch·ªçn)
cat > .env << EOF
CUDA_VISIBLE_DEVICES=0
NVIDIA_VISIBLE_DEVICES=all
NVIDIA_DRIVER_CAPABILITIES=compute,utility
GPU_MEMORY_FRACTION=0.9
PYTHONPATH=/ZipVoice:/app
DEFAULT_PROFILE=tina
EOF
```

#### **B∆∞·ªõc 4: Build v√† Deploy**

```bash
# Build images
docker compose build

# Deploy v·ªõi GPU support
docker compose up -d

# Ki·ªÉm tra logs
docker compose logs -f
```

#### **B∆∞·ªõc 5: Verification**

```bash
# Test backend API
curl http://localhost:8000/health

# Test GPU status
curl http://localhost:8000/gpu_status | jq

# Test frontend
curl -I http://localhost:3000
```

### üîß **C·∫•u H√¨nh N√¢ng Cao**

#### **GPU Optimization**

```yaml
# docker-compose.yml - GPU Configuration
services:
  backend:
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]
    environment:
      - CUDA_MEMORY_FRACTION=0.9
      - GPU_TEMP_EMERGENCY=90
      - GPU_TEMP_THROTTLE=85
```

#### **Performance Tuning**

```python
# backend/config.py - Performance Settings
PERFORMANCE_CONFIG = {
    "max_concurrent_renders": 1,
    "sentence_timeout": 60,
    "cleanup_interval_hours": 8,
    "metrics_retention": 1000,
    "gpu_monitor_interval": 5
}
```

#### **Security Configuration**

```yaml
# docker-compose.yml - Security Settings
services:
  backend:
    security_opt:
      - no-new-privileges:true
    read_only: false
    tmpfs:
      - /tmp:rw,noexec,nosuid,size=1g
    cap_drop:
      - ALL
    cap_add:
      - DAC_OVERRIDE
```

### üåê **Truy C·∫≠p ·ª®ng D·ª•ng**

- **Frontend**: [http://localhost:3000](http://localhost:3000)
- **Backend API**: [http://localhost:8000](http://localhost:8000)
- **API Docs**: [http://localhost:8000/docs](http://localhost:8000/docs)
- **GPU Status**: [http://localhost:8000/gpu_status](http://localhost:8000/gpu_status)
- **Health Check**: [http://localhost:8000/health](http://localhost:8000/health)

## üìñ **H∆∞·ªõng D·∫´n S·ª≠ D·ª•ng**

### üéµ **T·∫°o Gi·ªçng N√≥i C∆° B·∫£n**

1. **Nh·∫≠p vƒÉn b·∫£n**: G√µ vƒÉn b·∫£n ti·∫øng Vi·ªát v√†o √¥ "Nh·∫≠p vƒÉn b·∫£n"
2. **Ch·ªçn gi·ªçng**: S·ª≠ d·ª•ng gi·ªçng m·∫∑c ƒë·ªãnh ho·∫∑c t·∫°o profile t√πy ch·ªânh
3. **T·∫°o gi·ªçng**: Click "T·∫°o gi·ªçng n√≥i" v√† ch·ªù x·ª≠ l√Ω
4. **T·∫£i xu·ªëng**: Click "T·∫£i xu·ªëng" ƒë·ªÉ l∆∞u file WAV

### üë§ **Qu·∫£n L√Ω Profile Gi·ªçng N√≥i**

1. **T·∫°o Profile M·ªõi**:
   - Click "Th√™m profile m·ªõi"
   - Nh·∫≠p t√™n v√† m√¥ t·∫£
   - Upload file audio m·∫´u (WAV/MP3)
   - Nh·∫≠p transcript t∆∞∆°ng ·ª©ng
   - Click "T·∫°o profile"

2. **S·ª≠ d·ª•ng Profile**:
   - Ch·ªçn profile t·ª´ danh s√°ch
   - Ho·∫∑c s·ª≠ d·ª•ng gi·ªçng m·∫∑c ƒë·ªãnh (Tina)

### ‚ö° **Gi√°m S√°t Th·ªùi Gian Th·ª±c**

- **GPU Status**: Theo d√µi nhi·ªát ƒë·ªô, s·ª≠ d·ª•ng GPU v√† VRAM m·ªói 5 gi√¢y
- **Render Progress**: Xem ti·∫øn tr√¨nh x·ª≠ l√Ω v√† th·ªùi gian ∆∞·ªõc t√≠nh
- **Emergency Stop**: N√∫t d·ª´ng kh·∫©n c·∫•p khi c·∫ßn thi·∫øt
- **Performance Metrics**: Xem th·ªëng k√™ hi·ªáu nƒÉng t·ª´ 1000 l·∫ßn render g·∫ßn nh·∫•t

## üîß **Ph√°t Tri·ªÉn v√† T√πy Ch·ªânh**

### üìÅ **C·∫•u Tr√∫c Th∆∞ M·ª•c**

```
Premium-Vietnamese-TTS/
‚îú‚îÄ‚îÄ üìÅ backend/                 # FastAPI Backend
‚îÇ   ‚îú‚îÄ‚îÄ main.py                # API ch√≠nh
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt       # Dependencies Python
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile            # Docker config
‚îú‚îÄ‚îÄ üìÅ frontend/               # React Frontend  
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.jsx           # Component ch√≠nh
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.css           # Styles ch√≠nh
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.js          # Entry point
‚îÇ   ‚îú‚îÄ‚îÄ package.json          # Dependencies Node.js
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile            # Docker config
‚îú‚îÄ‚îÄ üìÅ data/                   # Voice Profiles
‚îÇ   ‚îú‚îÄ‚îÄ tina/                 # Profile m·∫∑c ƒë·ªãnh
‚îÇ   ‚îî‚îÄ‚îÄ [custom-profiles]/    # Profiles t√πy ch·ªânh
‚îú‚îÄ‚îÄ üìÅ ZipVoice/              # ZipVoice Submodule
‚îÇ   ‚îú‚îÄ‚îÄ zipvoice/             # Core TTS engine
‚îÇ   ‚îî‚îÄ‚îÄ assets/               # Model files
‚îú‚îÄ‚îÄ docker-compose.yml         # Container orchestration
‚îú‚îÄ‚îÄ README.md                 # T√†i li·ªáu n√†y
‚îî‚îÄ‚îÄ docs/                     # T√†i li·ªáu chi ti·∫øt
```

### üê≥ **Docker Development**

```bash
# Ch·∫°y trong development mode
docker compose up --build

# Xem logs chi ti·∫øt
docker compose logs backend
docker compose logs frontend

# Restart services
docker compose restart backend
docker compose restart frontend

# V√†o container ƒë·ªÉ debug
docker compose exec backend bash
docker compose exec frontend sh
```

## üîó **API Documentation v2.0**

### üìä **RESTful API Endpoints**

#### **Ch√≠nh:**

- `POST /synthesize_speech_v2`: T·∫°o gi·ªçng n√≥i t·ª´ text (phi√™n b·∫£n 2.0)
- `GET /profiles`: L·∫•y danh s√°ch voice profiles
- `POST /create_profile`: T·∫°o profile gi·ªçng n√≥i m·ªõi
- `DELETE /profiles/{id}`: X√≥a profile

#### **Gi√°m S√°t & Ki·ªÉm So√°t:**

- `GET /gpu_status`: Tr·∫°ng th√°i GPU th·ªùi gian th·ª±c (nhi·ªát ƒë·ªô, s·ª≠ d·ª•ng, VRAM)
- `GET /render_status`: Ti·∫øn tr√¨nh x·ª≠ l√Ω hi·ªán t·∫°i
- `POST /stop_render`: D·ª´ng kh·∫©n c·∫•p qu√° tr√¨nh render
- `GET /performance_metrics`: Th·ªëng k√™ hi·ªáu nƒÉng t·ª´ 1000 l·∫ßn render g·∫ßn nh·∫•t

#### **Health Check:**

- `GET /health`: Ki·ªÉm tra tr·∫°ng th√°i backend
- `GET /gpu_info`: Th√¥ng tin GPU

### üéØ **API Usage Examples**

#### **Basic Text-to-Speech (Version 2.0)**

```bash
# T·∫°o gi·ªçng n√≥i c∆° b·∫£n v·ªõi gi·ªçng m·∫∑c ƒë·ªãnh
curl -X POST "http://localhost:8000/synthesize_speech_v2" \
  -F "text=Xin ch√†o Vi·ªát Nam! H√¥m nay tr·ªùi ƒë·∫πp qu√°." \
  --output vietnam_greeting.wav

# T·∫°o gi·ªçng n√≥i v·ªõi profile t√πy ch·ªânh
curl -X POST "http://localhost:8000/synthesize_speech_v2" \
  -F "text=T√¥i l√† tr·ª£ l√Ω ·∫£o th√¥ng minh, r·∫•t vui ƒë∆∞·ª£c g·∫∑p b·∫°n." \
  -F "profile_id=my-custom-voice" \
  --output custom_voice.wav

# X·ª≠ l√Ω vƒÉn b·∫£n d√†i (unlimited length)
curl -X POST "http://localhost:8000/synthesize_speech_v2" \
  -F "text=$(cat long_vietnamese_story.txt)" \
  --output long_story.wav
```

#### **Real-time GPU Monitoring**

```bash
# Ki·ªÉm tra tr·∫°ng th√°i GPU
curl "http://localhost:8000/gpu_status" | jq '.'
# Response:
{
  "temperature": 75.5,
  "utilization": 85,
  "memory_used": 6144,
  "memory_total": 8192,
  "status": "NORMAL",
  "timestamp": "2025-01-09T10:30:15Z"
}

# Theo d√µi ti·∫øn tr√¨nh render
curl "http://localhost:8000/render_status" | jq '.'
# Response:
{
  "is_rendering": true,
  "current_sentence": 3,
  "total_sentences": 10,
  "elapsed_time": 45.2,
  "estimated_remaining": 102.3
}
```

#### **Performance Metrics & Analytics**

```bash
# L·∫•y th·ªëng k√™ hi·ªáu nƒÉng
curl "http://localhost:8000/performance_metrics" | jq '.'
# Response:
{
  "total_renders": 1000,
  "avg_time_per_word": 0.45,
  "avg_gpu_utilization": 82.3,
  "avg_temperature": 78.2,
  "success_rate": 99.2
}

# L·ªãch s·ª≠ renders g·∫ßn ƒë√¢y
curl "http://localhost:8000/recent_renders?page=1&per_page=10" | jq '.'
```

#### **Emergency Controls**

```bash
# D·ª´ng kh·∫©n c·∫•p qu√° tr√¨nh render
curl -X POST "http://localhost:8000/stop_render"

# Ki·ªÉm tra health
curl "http://localhost:8000/health" | jq '.'
```

### üë§ **Voice Profile Management API**

#### **T·∫°o Profile M·ªõi**

```bash
# Upload v√† t·∫°o profile gi·ªçng n√≥i
curl -X POST "http://localhost:8000/profiles" \
  -F "name=my-voice" \
  -F "display_name=My Custom Voice" \
  -F "description=Professional Vietnamese voice" \
  -F "sample_text=Xin ch√†o, t√¥i l√† Minh. R·∫•t vui ƒë∆∞·ª£c g·∫∑p b·∫°n." \
  -F "sample_wav=@my_voice_sample.wav"
```

#### **Qu·∫£n L√Ω Profiles**

```bash
# Li·ªát k√™ t·∫•t c·∫£ profiles
curl "http://localhost:8000/profiles" | jq '.'

# X√≥a profile (kh√¥ng th·ªÉ x√≥a default profiles)
curl -X DELETE "http://localhost:8000/profiles/my-voice"
```

### üîß **Advanced API Features**

#### **Batch Processing**

```python
import requests
import asyncio
import aiohttp

async def batch_tts_processing(texts: list, profile_id: str = "tina"):
    """
    X·ª≠ l√Ω h√†ng lo·∫°t vƒÉn b·∫£n TTS
    """
    async with aiohttp.ClientSession() as session:
        tasks = []
        for i, text in enumerate(texts):
            task = session.post(
                "http://localhost:8000/synthesize_speech_v2",
                data={
                    "text": text,
                    "profile_id": profile_id
                }
            )
            tasks.append(task)
        
        responses = await asyncio.gather(*tasks)
        
        # Save audio files
        for i, response in enumerate(responses):
            with open(f"batch_audio_{i:03d}.wav", "wb") as f:
                f.write(await response.read())

# Usage
texts = [
    "C√¢u th·ª© nh·∫•t v·ªÅ ch·ªß ƒë·ªÅ A.",
    "C√¢u th·ª© hai v·ªÅ ch·ªß ƒë·ªÅ B.", 
    "C√¢u th·ª© ba v·ªÅ ch·ªß ƒë·ªÅ C."
]

asyncio.run(batch_tts_processing(texts))
```

#### **Streaming & Real-time Updates**

```javascript
// Frontend: Real-time GPU monitoring
const monitorGPU = () => {
  const eventSource = new EventSource('http://localhost:8000/gpu_stream');
  
  eventSource.onmessage = (event) => {
    const data = JSON.parse(event.data);
    updateGPUDisplay(data);
    
    // Auto-stop if overheating
    if (data.temperature >= 90) {
      stopCurrentRender();
      showEmergencyAlert();
    }
  };
};

// Monitor render progress
const monitorRenderProgress = () => {
  const interval = setInterval(async () => {
    const response = await fetch('http://localhost:8000/render_status');
    const status = await response.json();
    
    if (status.is_rendering) {
      updateProgressBar(status.current_sentence / status.total_sentences);
      updateTimeEstimate(status.estimated_remaining);
    } else {
      clearInterval(interval);
    }
  }, 1000);
};
```

### üõ°Ô∏è **Error Handling & Response Codes**

#### **HTTP Status Codes**

- `200 OK`: Request th√†nh c√¥ng
- `400 Bad Request`: Request kh√¥ng h·ª£p l·ªá (thi·∫øu text ho·∫∑c sai format)
- `413 Payload Too Large`: VƒÉn b·∫£n qu√° d√†i (>50MB)
- `429 Too Many Requests`: Qu√° nhi·ªÅu request ƒë·ªìng th·ªùi
- `500 Internal Server Error`: L·ªói server ho·∫∑c GPU
- `503 Service Unavailable`: GPU qu√° n√≥ng ho·∫∑c kh√¥ng c√≥ s·∫µn

#### **Error Response Format**

```json
{
  "error": "GPU_OVERHEATING",
  "message": "GPU temperature (92¬∞C) exceeds safety limit (90¬∞C)",
  "details": {
    "current_temperature": 92,
    "max_allowed": 90,
    "suggested_action": "Wait for GPU to cool down"
  },
  "timestamp": "2025-01-09T10:30:15Z"
}
```

## üî¨ **Chi Ti·∫øt K·ªπ Thu·∫≠t**

### üß† **ZipVoice Integration**

```bash
# Vietnamese TTS Command (Version 2.0)
python3 -m zipvoice.bin.infer_zipvoice \
    --tokenizer espeak \
    --lang vi \
    --prompt-wav /data/profile/sample.wav \
    --prompt-text "Prompt text" \
    --text "Text c·∫ßn t·∫°o gi·ªçng" \
    --res-dir /DOING
```

### ‚ö° **Sentence-Based Processing Logic**

```python
# X·ª≠ l√Ω c√¢u theo c√¢u cho hi·ªáu nƒÉng t·ªëi ∆∞u
sentences = split_vietnamese_sentences(text)

for i, sentence in enumerate(sentences):
    segment_path = f"/DOING/seg_{i:03d}.wav"
    # Render t·ª´ng c√¢u ri√™ng bi·ªát
    render_single_sentence(sentence, segment_path, timeout=60)

# G·ªôp c√°c segment th√†nh file cu·ªëi
final_audio = merge_segments("/DOING")
```

### üé® **Frontend Architecture**

```javascript
// GPU Monitoring Component
const GPUMonitor = () => {
  const [gpuStatus, setGpuStatus] = useState(null);
  
  useEffect(() => {
    const interval = setInterval(async () => {
      const status = await fetch('/gpu_status').then(r => r.json());
      setGpuStatus(status);
    }, 5000); // Poll every 5 seconds
    
    return () => clearInterval(interval);
  }, []);
  
  return (
    <div className={`gpu-temp ${gpuStatus.temp > 85 ? 'warning' : 'normal'}`}>
      GPU: {gpuStatus.temp}¬∞C | VRAM: {gpuStatus.vram}%
    </div>
  );
};
```

## üéØ **Use Cases v√† ·ª®ng D·ª•ng**

### üì± **·ª®ng D·ª•ng Th·ª±c T·∫ø**
- **E-learning**: T·∫°o n·ªôi dung gi√°o d·ª•c ti·∫øng Vi·ªát
- **Audiobook**: Chuy·ªÉn ƒë·ªïi s√°ch th√†nh audio
- **Podcast**: T·∫°o n·ªôi dung podcast t·ª± ƒë·ªông
- **IVR Systems**: H·ªá th·ªëng t·ªïng ƒë√†i ti·∫øng Vi·ªát
- **Accessibility**: H·ªó tr·ª£ ng∆∞·ªùi khi·∫øm th·ªã
- **Gaming**: T·∫°o gi·ªçng n√≥i cho game
- **Marketing**: Qu·∫£ng c√°o v√† n·ªôi dung th∆∞∆°ng m·∫°i

### üè¢ **T√≠ch H·ª£p Doanh Nghi·ªáp**
- **API Integration**: RESTful API cho c√°c h·ªá th·ªëng
- **Batch Processing**: X·ª≠ l√Ω h√†ng lo·∫°t vƒÉn b·∫£n
- **Custom Voices**: T·∫°o gi·ªçng n√≥i th∆∞∆°ng hi·ªáu
- **Multi-tenant**: H·ªó tr·ª£ nhi·ªÅu kh√°ch h√†ng

## üìä **Benchmark v√† Hi·ªáu NƒÉng**

### ‚è±Ô∏è **Th·ªùi Gian X·ª≠ L√Ω (RTX 4090)**
| ƒê·ªô d√†i vƒÉn b·∫£n | Th·ªùi gian x·ª≠ l√Ω | Ghi ch√∫ |
|----------------|------------------|---------|
| 1 c√¢u ƒë∆°n (10-20 t·ª´) | 8-12 gi√¢y | X·ª≠ l√Ω tr·ª±c ti·∫øp |
| 1 ƒëo·∫°n vƒÉn (50 t·ª´) | 15-25 gi√¢y | Chia th√†nh 2-3 c√¢u |
| 1 trang (200 t·ª´) | 40-80 gi√¢y | Chia th√†nh 8-12 c√¢u |
| VƒÉn b·∫£n d√†i (1000+ t·ª´) | 5-15 ph√∫t | X·ª≠ l√Ω theo l√¥, timeout 60s/c√¢u |

### üíæ **S·ª≠ D·ª•ng T√†i Nguy√™n**
| C·∫•u h√¨nh | VRAM | RAM | CPU |
|----------|------|-----|-----|
| Minimum | 6GB | 8GB | 4 cores |
| Recommended | 8GB | 16GB | 8 cores |
| Optimal | 12GB+ | 32GB | 16+ cores |

### üõ°Ô∏è **B·∫£o V·ªá & Gi√°m S√°t**
- **Nhi·ªát ƒë·ªô GPU**: T·ª± ƒë·ªông gi√°m s√°t, d·ª´ng khi >90¬∞C
- **VRAM Tracking**: Theo d√µi s·ª≠ d·ª•ng b·ªô nh·ªõ GPU
- **Emergency Stop**: D·ª´ng kh·∫©n c·∫•p b·∫•t k·ª≥ l√∫c n√†o
- **Performance History**: L∆∞u tr·ªØ 1000 l·∫ßn render g·∫ßn nh·∫•t

## üõ°Ô∏è **B·∫£o M·∫≠t v√† Tu√¢n Th·ªß**

### üîí **B·∫£o M·∫≠t D·ªØ Li·ªáu**
- Kh√¥ng l∆∞u tr·ªØ vƒÉn b·∫£n ng∆∞·ªùi d√πng
- Voice profiles ƒë∆∞·ª£c m√£ h√≥a
- API rate limiting
- CORS protection

### üìú **Tu√¢n Th·ªß Ph√°p L√Ω**
- Tu√¢n th·ªß GDPR cho d·ªØ li·ªáu EU
- Ch√≠nh s√°ch ri√™ng t∆∞ r√µ r√†ng
- Kh√¥ng thu th·∫≠p d·ªØ li·ªáu c√° nh√¢n
- Open source license

## ü§ù **ƒê√≥ng G√≥p v√† Ph√°t Tri·ªÉn**

### üåü **C√°ch ƒê√≥ng G√≥p**
1. Fork repository n√†y
2. T·∫°o feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to branch (`git push origin feature/AmazingFeature`)
5. T·∫°o Pull Request

### üêõ **B√°o L·ªói**
- S·ª≠ d·ª•ng GitHub Issues
- Cung c·∫•p th√¥ng tin chi ti·∫øt
- Include logs v√† screenshots
- M√¥ t·∫£ b∆∞·ªõc reproduce

### üí° **ƒê·ªÅ Xu·∫•t T√≠nh NƒÉng**
- T·∫°o Feature Request issue
- M√¥ t·∫£ use case c·ª• th·ªÉ
- Th·∫£o lu·∫≠n implementation approach

## üìö **Documentation Suite**

H·ªá th·ªëng c√≥ b·ªô t√†i li·ªáu ho√†n ch·ªânh cho ng∆∞·ªùi d√πng v√† developer:

### üîç **T√†i Li·ªáu Ng∆∞·ªùi D√πng**

- **[README.md](README.md)** - T√†i li·ªáu ch√≠nh v·ªõi h∆∞·ªõng d·∫´n c√†i ƒë·∫∑t v√† s·ª≠ d·ª•ng
- **[QUICKSTART.md](QUICKSTART.md)** - H∆∞·ªõng d·∫´n nhanh ƒë·ªÉ kh·ªüi ch·∫°y trong 5 ph√∫t
- **[PROJECT-COMPLETION.md](PROJECT-COMPLETION.md)** - B√°o c√°o ho√†n th√†nh v√† t√≠nh nƒÉng

### ü§ñ **T√†i Li·ªáu ƒê·ªÉ AI T√°i T·∫°o H·ªá Th·ªëng**

N·∫øu b·∫°n mu·ªën AI Agent t√°i t·∫°o l·∫°i h·ªá th·ªëng n√†y 100%, h√£y s·ª≠ d·ª•ng:

- **[MASTER_PROMPT.md](MASTER_PROMPT.md)** - Prompt ho√†n ch·ªânh ƒë·ªÉ t√°i t·∫°o h·ªá th·ªëng Vietnamese TTS hi·ªán t·∫°i
- **[CLONE_PROMPT.md](CLONE_PROMPT.md)** - H∆∞·ªõng d·∫´n clone sang h·ªá th·ªëng English TTS v·ªõi Orpheus

### üí° **C√°ch S·ª≠ D·ª•ng V·ªõi AI Agent**

```bash
# ƒê·ªÉ t√°i t·∫°o h·ªá th·ªëng Vietnamese TTS hi·ªán t·∫°i:
"H√£y ƒë·ªçc file MASTER_PROMPT.md v√† t√°i t·∫°o l·∫°i h·ªá th·ªëng ƒë√∫ng 100%"

# ƒê·ªÉ t·∫°o h·ªá th·ªëng English TTS m·ªõi:
"H√£y ƒë·ªçc file CLONE_PROMPT.md v√† t·∫°o h·ªá th·ªëng English TTS v·ªõi Orpheus"
```

## üìö **T√†i Li·ªáu Tham Kh·∫£o**

### üîó **Links H·ªØu √çch**
- [ZipVoice Official Repository](https://github.com/k2-fsa/ZipVoice)
- [eSpeak NG Documentation](http://espeak.sourceforge.net/)
- [FastAPI Documentation](https://fastapi.tiangolo.com/)
- [React Documentation](https://reactjs.org/docs/)
- [Docker Documentation](https://docs.docker.com/)

### üìñ **Nghi√™n C·ª©u Li√™n Quan**
- [Flow Matching for TTS](https://arxiv.org/abs/2309.09456)
- [Vietnamese Phoneme Analysis](https://www.researchgate.net/publication/vietnamese-phoneme)
- [CUDA Optimization for Deep Learning](https://developer.nvidia.com/deep-learning)

## üèÜ **Acknowledgments**

### üôè **C·∫£m ∆†n**
- **ZipVoice Team**: Cung c·∫•p TTS engine tuy·ªát v·ªùi
- **k2-fsa Community**: Support v√† development
- **eSpeak Contributors**: Vietnamese language support
- **Docker Team**: Containerization platform
- **NVIDIA**: CUDA v√† GPU support

## üìû **Li√™n H·ªá v√† H·ªó Tr·ª£**

### üí¨ **K√™nh H·ªó Tr·ª£**
- **GitHub Issues**: B√°o l·ªói v√† ƒë·ªÅ xu·∫•t
- **Discussions**: Th·∫£o lu·∫≠n k·ªπ thu·∫≠t
- **Email**: [nguyenanhtuan161095@gmail.com]
- **Discord**: [Premium Vietnamese TTS Community]

### üåê **C·ªông ƒê·ªìng**
- **Facebook Group**: [Vietnamese TTS Developers]
- **Reddit**: [r/VietnameseTTS]
- **Stack Overflow**: Tag [vietnamese-tts]

---

## üìÑ **License**

```
MIT License

Copyright (c) 2025 Premium Vietnamese TTS Project

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

---

<div align="center">

**‚≠ê N·∫øu project n√†y h·ªØu √≠ch, h√£y cho ch√∫ng t√¥i m·ªôt star! ‚≠ê**

Made with ‚ù§Ô∏è for the Vietnamese community

[üè† Home](https://github.com/Clarence161095/Premium-Vietnamese-Text-to-Speech-Application) ‚Ä¢ [üìñ Docs](./docs/) ‚Ä¢ [üêõ Issues](https://github.com/Clarence161095/Premium-Vietnamese-Text-to-Speech-Application/issues) ‚Ä¢ [üí° Discussions](https://github.com/Clarence161095/Premium-Vietnamese-Text-to-Speech-Application/discussions)

</div>
